- name: Verifica se mbot j√° existe
  stat:
     path: /home/mindmakers/mbot/mBlock_RaspberryPI/desktop-app
  register: mbot
- name: cria a pasta mbot
  file:
    path: /home/mindmakers/mbot
    state: directory
    mode: 0744
  when: not mbot.stat.exists
- name: Download arquivo instalacao mbot
  get_url:
    url: http://download.makeblock.com/mBlock_RaspberryPI.zip
    dest: /home/mindmakers/mbot
    timeout: 30
    mode: 0744
  when: not mbot.stat.exists
- name: Extract mbot.zip
  unarchive:
    src: /home/mindmakers/mbot/mBlock_RaspberryPI.zip
    dest: /home/mindmakers/mbot
    remote_src: yes
#- name: Unarchive a file that needs to be downloaded (added in 2.0)
#  unarchive:
#    src: http://download.makeblock.com/mBlock_RaspberryPI.zip
#    dest: /home/mindmakers/mbot
#    remote_src: yes
#  when: not mbot.stat.exists
- name: Install packages based on package.json.
  npm:
    path: /home/mindmakers/mbot/mBlock_RaspberryPI/desktop-app
  when: not mbot.stat.exists
